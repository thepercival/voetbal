Voetbal\Competition:
    type: entity
    repositoryClass: Voetbal\Competition\Repository
    table: competitions
    id:
        id:
            type: integer
            nullable: false
            id: true
            column: id
            generator:
                strategy: AUTO
    fields:
        state:
            type: smallint
            default:  !php/const:Voetbal\Competition::STATE_CREATED
            nullable: false
            unique: false
        startDateTime:
            type: datetime_immutable
            unique: false
            nullable: false
    oneToMany:
        rounds:
            targetEntity: Voetbal\Round
            mappedBy: competition
            fetch: EXTRA_LAZY
            cascade: [ remove ]
        referees:
            targetEntity: Voetbal\Referee
            mappedBy: competition
            fetch: EXTRA_LAZY
            cascade: [ remove ]
        fields:
            targetEntity: Voetbal\Field
            mappedBy: competition
            fetch: EXTRA_LAZY
            cascade: [ remove ]
#        externals:
#          targetEntity: Voetbal\Competition
#          mappedBy: importableObject
    manyToOne:
        league:
            targetEntity: Voetbal\League
            inversedBy: competitions
            joinColumn:
              name: leagueid
              referencedColumnName: id
              nullable: false
              onDelete: CASCADE
        season:
            targetEntity: Voetbal\Season
            inversedBy: competitions
            joinColumn:
              name: seasonid
              referencedColumnName: id
              nullable: false
    uniqueConstraints:
        main_u_idx:
            columns: [ leagueid, seasonid ]